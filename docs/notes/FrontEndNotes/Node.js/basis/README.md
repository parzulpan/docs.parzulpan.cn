### 前言
这是关于Node.js快速入门的学习文档，简单易懂，感谢开源。
[文档地址](http://nqdeng.github.io/7-days-nodejs/)

### Node.js基础
#### 点拨
* ...

#### 小结
* Node.js是一个JS脚本解析器，任何操作系统下安装Node.js的本质上做的事情都是把Node.js执行程序复制到一个目录，然后保证这个目录在系统的PATH环境下，以便终端使用node命令
* 终端下直接输入node命令可进入命令交互模式，很适合用来测试一些JS代码片段，比如正则表达式
* NodeJS使用CMD模块系统，主模块作为程序入口点，所有模块在执行过程中只初始化一次
* 除非JS模块不能满足需求，否则不要轻易使用二进制模块，否则你的用户会叫苦连天

### 代码的组织和部署
#### 点拨
* NPM提供了很多命令，例如install和publish，使用npm help可查看所有命令。
* 使用npm help <command>可查看某条命令的详细帮助，例如npm help install。
* 在package.json所在目录下使用npm install . -g可先在本地安装当前命令行程序，可用于发布前的本地测试。
* 使用npm update <package>可以把当前目录下node_modules子目录里边的对应模块更新至最新版本。
* 使用npm update <package> -g可以把全局安装的对应命令行程序更新至最新版。
* 使用npm cache clear可以清空NPM本地缓存，用于对付使用相同版本号发布新版本代码的人。
* 使用npm unpublish <package>@<version>可以撤销发布自己发布过的某个版本代码。

#### 小结
* 编写代码前先规划好目录结构，才能做到有条不紊
* 稍大些的程序可以将代码拆分为多个模块管理，更大些的程序可以使用包来组织模块
* 合理使用node_modules和NODE_PATH来解耦包的使用方式和物理路径
* 使用NPM加入NodeJS生态圈互通有无
* 想到了心仪的包名时请提前在NPM上抢注

### 文件操作
#### 点拨
* ...

#### 小结
* 学好文件操作，编写各种程序都不怕
* 如果不是很在意性能，fs模块的同步API能让生活更加美好
* 需要对文件读写做到字节级别的精细控制时，请使用fs模块的文件底层操作API
* 不要使用拼接字符串的方式来处理路径，使用path模块
* 掌握好目录遍历和文件编码处理技巧，很实用

### 网络操作
通过NodeJS，除了可以编写一些服务端程序来协助前端开发和测试外，还能够学习一些HTTP协议与Socket协议的相关知识，这些知识在优化前端性能和排查前端故障时说不定能派上用场。
#### 点拨
* 为什么通过headers对象访问到的HTTP请求头或响应头字段不是驼峰的？
    * 从规范上讲，HTTP请求头和响应头字段都应该是驼峰的。但现实是残酷的，不是每个HTTP服务端或客户端程序都严格遵循规范，所以NodeJS在处理从别的客户端或服务端收到的头字段时，都统一地转换为了小写字母格式，以便开发者能使用统一的方式来访问头字段，例如headers['content-length']。
* 为什么http模块创建的HTTP服务器返回的响应是chunked传输方式的？
    * 因为默认情况下，使用.writeHead方法写入响应头后，允许使用.write方法写入任意长度的响应体数据，并使用.end方法结束一个响应。由于响应体数据长度不确定，因此NodeJS自动在响应头里添加了Transfer-Encoding: chunked字段，并采用chunked传输方式。但是当响应体数据长度确定时，可使用.writeHead方法在响应头里加上Content-Length字段，这样做之后NodeJS就不会自动添加Transfer-Encoding字段和使用chunked传输方式。
* 为什么使用http模块发起HTTP客户端请求时，有时候会发生socket hang up错误？
    * 发起客户端HTTP请求前需要先创建一个客户端。http模块提供了一个全局客户端http.globalAgent，可以让我们使用.request或.get方法时不用手动创建客户端。但是全局客户端默认只允许5个并发Socket连接，当某一个时刻HTTP客户端请求创建过多，超过这个数字时，就会发生socket hang up错误。解决方法也很简单，通过http.globalAgent.maxSockets属性把这个数字改大些即可。另外，https模块遇到这个问题时也一样通过https.globalAgent.maxSockets属性来处理。


#### 小结
* http和https模块支持服务端模式和客户端模式两种使用方式
* request和response对象除了用于读写头数据外，都可以当作数据流来操作
* url.parse方法加上request.url属性是处理HTTP请求时的固定搭配
* 使用zlip模块可以减少使用HTTP协议时的数据传输量
* 通过net模块的Socket服务器和客户端可对HTTP协议做底层操作

### 进程管理
NodeJS可以感知和控制自身进程的运行环境和状态，也可以创建子进程并与其协同工作，这使得NodeJS可以把多个程序组合在一起共同完成某项工作，并在其中充当胶水和调度器的作用。
#### 点拨
* ...

#### 小结
* 使用process对象管理自身
* 用child_process模块创建和管理子进程


### 异步编程
Node.js最大的优势 -- 事件机制和异步IO，虽然它们对开发者不透明。
#### 点拨
* 
#### 小结
* 不掌握异步编程就不算学会Node.js
* 异步编程依托于回调来实现，而使用回调不一定就是异步编程
* 异步编程下的函数间数据传递、数组遍历和异常处理与同步编程有很大区别
* 使用domain模块简化异步代码的异常处理，并小心陷阱。如果不能确定是否会导致内存泄漏等问题，最好在处理完异常后重启程序比较妥当

### 总结示例
