# 高频面试题：基本概念

## 什么是SQL

* 即结构化查询语言，是一种数据库查询查询语言。
* 它的作用是用于数据存取、查询、更新，并管理关系型数据库系统。

## 什么是MySQL

* MySQL是一个关系型数据库管理系统(DBMS)，它是最流行的关系型数据库管理系统之一，它是开源免费的，并且方便扩展。

## 数据库三大范式

* 第一范式（`1NF`）：属性是最小单位，不可再分。
  * **通俗的讲**，是为了确保每列的原子性。
  * 如果每列都是不可再分的最小数据单元，则满足第一范式。
* 第二范式（`2NF`）：满足第一范式，且任何非主属性完全依赖于主键（消除第一范式非主属性对码的部分函数依赖）。
  * **通俗的讲**，在第一范式的基础上更进一层，是为了确保表中的每列都和主键相关。
  * 如果一个关系满足第一范式，并且除了主键以外的其它列都依赖于该主键，则满足第二范式。
* 第三范式（`3NF`）：满足第二范式，且任何非主属性不依赖于其他非主属性（消除第二范式非主属性对码的传递函数依赖）。
  * **通俗的讲**，在第二范式的基础上更进一层，是为了确保每列都和主键列直接相关，而不是间接相关。
  * 如果一个关系满足第二范式，并且除了主键以外的其它列都不依赖于主键列，则满足第三范式。

设计范式是为了在设计中更好的解决数据冗余，数据有效性检查，提高存储效率。

## 数据库恢复

* 事务：是用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位。
* 事物的 ACID 特性：原子性、一致性、隔离性、持续性。
* 恢复的实现技术：建立冗余数据 -> 利用冗余数据实施数据库恢复。
* 建立冗余数据常用技术：数据转储（动态海量转储、动态增量转储、静态海量转储、静态增量转储）、登记日志文件。

## MySQL有关权限的表

MySQL服务器通过权限表来控制用户对数据库的访问，权限表放在 `mysql` 数据库里，由 `mysql_install_db` 脚本初始化。这些权限表分别为：

* `user`：记录允许连接到服务器的用户帐号信息，里面的权限是全局性的。
* `db`：记录各个帐号在各个数据上的操作权限。
* `tables_priv`：记录数据表级的操作权限。
* `columns_priv`：记录数据列级的操作权限。
* `host`：配合 `db` 权限表对给定主机上数据库级操作权限作更细致的控制。

## MySQL的binlog

`binlog` 是MySQL数据库的二进制日志，用于记录用户对数据库操作的SQL语句（除了数据查询语句）信息。可以使用 `mysqlbinlog` 命令查看二进制日志的内容。

`binlog` 的格式有三种：

* **STATMENT模式**：基于SQL语句的复制(`statement-based replication, SBR`)，每一条会修改数据的SQL语句会记录到 `binlog` 中。
  * **优点**：不需要记录每一条SQL语句与每行的数据变化，这样 `binlog` 的日志也会比较少，减少了磁盘`IO`，提高性能。
  * **缺点**：在某些情况下会导致主从数据不一致。
* **ROW模式**：基于行的复制(`row-based replication, RBR`)，不记录每一条SQL语句的上下文信息，仅需记录哪条数据被修改，修改成什么样子。
  * **优点**：不会出现主从数据不一致的情况。
  * **缺点**：会产生大量的日志，尤其是`ALTER TABLE`的时候会让日志暴涨。
* **MIXED模式**：混合模式复制(`mixed-based replication, MBR`)，以上两种模式的混合使用，一般的复制使用**STATEMENT模式**保存 `binlog`，对于**STATEMENT模式**无法复制的操作使用**ROW模式**保存 `binlog`，MySQL会根据执行的SQL语句选择日志保存方式。

无论是增量备份还是主从复制，都是需要开启 `binlog` 日志，最好跟数据目录设置到不同的磁盘分区，可以降低 `IO` 等待，提升性能；并且在磁盘故障的时候可以利用 `binlog` 恢复数据。

## MySQL有哪些数据类型

* 整数类型：包括 `TINTINT(1 byte)`、`SMALLINT(2 byte)`、`MEDIUMINT(3 byte)`、`INT / INTEGER(4 byte)`、`BIGINT(8 byte)`。
* 实数类型：包括 `FLOAT(4 byte)`、`DOUBLE(8 byte)`、`DECIMAL`，对 `DECIMAL(M,D)`，如果 `M>D`，为 `M+2` 否则为 `D+2`。
* 字符串类型：包括 `VARCHAR(0-65535 bytes)`、`CHAR(0-255 bytes)`、`TEXT(0-65535 bytes)`、`BLOB(0-65535 bytes)`等。
* 枚举类型：把不重复的数据存储为一个预定义的集合。
* 日期时间类型：包括 `DATE(3 byte)`、`TIME(3 byte)`、`DATETIME(8 byte)`、`IMESTAMP(4 byte)`、`YEAR(1 byte)`。尽量用 `IMESTAMP`，它比 `DATETIME` 的空间效率高。

`FLOAT` 与 `DOUBLE` 差异（单精度与双精度有什么区别）：

最本质的区别是单精度 `FLOAT` ，在 `32` 位机器上用 `4` 个字节来存储的，而双精度 `DOUBLE` 是用 `8` 个字节来存储的，由于存储位不同，他们能表示的数值的范围就不同，也就是能准确表示的数的位数就不同。
