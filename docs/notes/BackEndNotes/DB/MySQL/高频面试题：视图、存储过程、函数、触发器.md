# 高频面试题：视图、存储过程、函数、触发器

## 什么是视图

视图是虚拟的表。与包含数据的表不一样，视图只包含使用时动态检索数据的查询。

## 视图的优缺点和使用场景

* 优点：
  * 视图可极大地简化复杂的数据处理。
* 缺点：
  * 视图不能索引，也不能有关联的触发器或默认值。
* 使用场景：
  * 重用SQL语句。
  * 简化复杂的SQL操作。在编写查询后，可以方便地重用它而不必知道它的基本查询细节。
  * 使用表的组成部分而不是整个表。
  * 保护数据。可以给用户授予表的特定部分的访问权限而不是整个表的访问权限。
  * 更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。

## 什么是存储过程

存储过程简单来说，就是为以后的使用而保存的一条或多条MySQL语句的集合。可将其视为批文件，虽然它们的作用不仅限于批处理。

## 存储过程的优缺点和使用场景

* 优点：
  * **简化操作**。通过把处理封装在容易使用的单元中，可以简化复杂的操作。
  * **保证数据的完整性**。由于不要求反复建立一系列处理步骤，这保证了数据的完整性。如果所有开发人员和应用程序都使用同一（试验和测试）存储过程，则所使用的代码都是相同的。
  * **简化对变动的管理**。如果表名、列名或业务逻辑（或别的内容）有变化，只需要更改存储过程的代码。使用它的人员甚至不需要知道这些变化。
  * **提高性能**。因为使用存储过程比使用单独的SQL语句要快。
  * **编写功能更强更灵活的代码**。存在一些只能用在单个请求中的MySQL元素和特性，存储过程可以使用它们来编写功能更强更灵活的代码。
* 缺点：
  * 一般来说，存储过程的编写比基本SQL语句复杂，编写存储过程需要更高的技能，更丰富的经验。
  * 可能没有创建存储过程的安全访问权限。许多数据库管理员限制存储过程的创建权限，允许用户使用存储过程，但不允许他们创建存储过程。
  * 可移植性差。
* 使用场景：
  * 同时对多个表进行处理的时候采用存储过程比较合适。

## 什么是触发器，MySQL中有那些触发器

触发器 是MySQL响应以下任意语句而自动执行的一条MySQL语句（或位于BEGIN和END语句之间的一组语句）：

* `DELETE`
* `INSERT`
* `UPDATE`

所以只有这**六种触发器**( Before 和 After )，其他MySQL语句不支持触发器。

## 触发器的优缺点和使用场景

* 优点：
  * 提供了检查数据完整性的替代方法。
  * 可以捕获数据库层中业务逻辑中的错误。
  * 提供了运行计划任务的另一种方法。
  * 对于监测表中数据的更改非常有用。
* 缺点：
  * 只能提供扩展验证，并且无法替换所有验证。
  * 可能会增加数据库服务器的开销。
