# 高频面试题：数据库优化

## 为什么要分库分表

分库分表为了支撑高并发和解决数据量大这两个问题。

基础概念：

* `QPS（Query per second）`，即每秒查询量，计算方式为 `一段时间的总查询次数` 除 `这段时间` 。
* `TPS（Transaction per second）`，即每秒事务量，计算方式为 `一段时间的总事务提交数和事务回滚数` 除 `这段时间` 。

分表就是把一个表的数据放到多个表中，然后查询的时候就查一个表。比如说，按照用户ID来分表，将一个用户的数据放在一个表中，然后操作时就对一个用户的表操作。

分库就是将一个库的数据拆分到多个库中，访问时就访问一个表。

总结：

| 情况 |  分库分表前 | 分库分表后 |
| :--- | :--- | :---|
| 并发支撑情况 | MySQL单机部署，扛不住高并发 | MySQL从单机到多机，能承受的并发增加了多倍 |
| 磁盘使用情况 | MySQL单机磁盘容量几乎撑满 | 拆分为多个库，数据库服务器磁盘使用率大大降低 |
| SQL执行性能情况 | 单表数据量太大，SQL越跑越慢 | 单表数据量减少，SQL执行效率明显提升 |

## 分库分表如何平滑过渡

## 设计一个动态扩容缩容的分库分表方案

## 分库分表之后，id 主键如何处理

## 如何实现MySQL的读写分离，或者说读写分离有哪些解决方案

## 如何设计一个高并发系统
